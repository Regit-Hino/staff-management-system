<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スタッフ管理 - シフト管理システム</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            font-size: 14px;
        }
        
        .header {
            background: white;
            border-bottom: 1px solid #dee2e6;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 52px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .company-select {
            border: 1px solid #ced4da;
            border-radius: 3px;
            padding: 4px 8px;
            font-size: 13px;
            background: white;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
            color: #495057;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        
        .trial-info {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .plan-badge {
            background: #17a2b8;
            color: white;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 11px;
            font-weight: normal;
        }
        
        .days-remaining {
            background: #28a745;
            color: white;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 11px;
        }
        
        .notification-icon {
            color: #6c757d;
            cursor: pointer;
        }
        
        .user-name {
            color: #495057;
            font-size: 13px;
        }
        
        .container {
            display: flex;
            min-height: calc(100vh - 52px);
        }
        
        .sidebar {
            width: 180px;
            background: white;
            border-right: 1px solid #dee2e6;
            padding: 0;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            color: #495057;
            text-decoration: none;
            border-left: 3px solid transparent;
            font-size: 13px;
            transition: background-color 0.15s ease;
        }
        
        .nav-item:hover {
            background: #f8f9fa;
            color: #495057;
        }
        
        .nav-item.active {
            background: #e9ecef;
            color: #495057;
            border-left-color: #007bff;
            font-weight: 500;
        }
        
        .nav-icon {
            margin-right: 8px;
            width: 16px;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }
        
        .upgrade-btn {
            margin: 12px;
            padding: 8px 16px;
            background: #17a2b8;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            text-align: center;
        }
        
        .main-content {
            flex: 1;
            padding: 16px 20px;
            background: #f8f9fa;
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            font-size: 13px;
            color: #6c757d;
        }
        
        .breadcrumb-back {
            margin-right: 8px;
            color: #6c757d;
            text-decoration: none;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .page-title {
            font-size: 16px;
            font-weight: 500;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .staff-count {
            background: #e9ecef;
            color: #495057;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: normal;
        }
        
        .header-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn {
            padding: 6px 12px;
            border: 1px solid #ced4da;
            border-radius: 3px;
            background: white;
            cursor: pointer;
            font-size: 13px;
            text-decoration: none;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .btn:hover {
            background: #f8f9fa;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .btn-primary:hover {
            background: #0056b3;
        }
        
        .staff-table {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            overflow: hidden;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
            font-size: 13px;
            vertical-align: middle;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 500;
            color: #495057;
            border-bottom: 1px solid #dee2e6;
        }
        
        .drag-handle {
            cursor: move;
            color: #adb5bd;
            padding: 4px;
        }
        
        .drag-handle:hover {
            color: #6c757d;
        }
        
        .staff-name {
            font-weight: 500;
            color: #495057;
            margin-bottom: 2px;
        }
        
        .staff-memo {
            color: #6c757d;
            font-size: 11px;
        }
        
        .tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 11px;
            margin-right: 4px;
        }
        
        .role-select {
            border: 1px solid #ced4da;
            border-radius: 3px;
            padding: 4px 8px;
            background: white;
            color: #495057;
            cursor: pointer;
            font-size: 13px;
        }
        
        .shift-check {
            color: #28a745;
            font-size: 16px;
            text-align: center;
        }
        
        .actions {
            cursor: pointer;
            color: #6c757d;
            padding: 4px;
        }
        
        .actions:hover {
            color: #495057;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
            gap: 8px;
            background: white;
            border-top: 1px solid #dee2e6;
        }
        
        .page-btn {
            padding: 6px 10px;
            border: 1px solid #ced4da;
            background: white;
            cursor: pointer;
            border-radius: 3px;
            font-size: 13px;
            color: #495057;
        }
        
        .page-btn:hover {
            background: #f8f9fa;
        }
        
        .page-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .page-btn:disabled {
            background: #f8f9fa;
            color: #adb5bd;
            cursor: not-allowed;
        }
        
        .items-per-page {
            margin-left: 16px;
            font-size: 13px;
            color: #6c757d;
        }
        
        .invite-section {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .invite-title {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #495057;
        }
        
        .invite-icon-header {
            color: #007bff;
        }
        
        .invite-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        
        .invite-card {
            border: 1px solid #dee2e6;
            border-radius: 3px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.15s ease;
            background: white;
        }
        
        .invite-card:hover {
            border-color: #007bff;
            box-shadow: 0 2px 4px rgba(0,123,255,0.15);
        }
        
        .invite-icon {
            font-size: 20px;
            margin-bottom: 8px;
            color: #6c757d;
        }
        
        .invite-label {
            font-size: 13px;
            color: #495057;
            font-weight: normal;
        }
        
        .currency {
            color: #6c757d;
        }
        
        .empty-field {
            color: #adb5bd;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* モーダル共通スタイル */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: 1000;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .modal.show {
            opacity: 1;
        }
        
        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 0;
            margin: 0 auto;
            max-width: 400px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: scale(0.9) translateY(-20px);
            transition: all 0.3s ease;
            top: 50%;
            transform: translateY(-50%) scale(0.9);
        }
        
        .modal.show .modal-content {
            transform: translateY(-50%) scale(1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #e9ecef;
            background: #f8f9fa;
        }
        
        .modal-title {
            font-size: 14px;
            font-weight: 500;
            color: #495057;
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 18px;
            color: #6c757d;
            cursor: pointer;
            padding: 4px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            color: #495057;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #495057;
            font-weight: 500;
        }
        
        .form-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ced4da;
            border-radius: 3px;
            font-size: 13px;
            color: #495057;
            background: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 0 1px rgba(0,123,255,0.25);
        }
        
        .btn-modal {
            padding: 8px 16px;
            border: none;
            border-radius: 3px;
            font-size: 13px;
            cursor: pointer;
            font-weight: 400;
            transition: all 0.2s ease;
        }
        
        .btn-modal-primary {
            background: #17a2b8;
            color: white;
        }
        
        .btn-modal-primary:hover {
            background: #138496;
        }
        
        .btn-modal-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-modal-secondary:hover {
            background: #5a6268;
        }
        
        .modal-actions {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px 20px;
            border-top: 1px solid #e9ecef;
            background: #f8f9fa;
        }
        
        .invite-url {
            background: #f8f9fa;
            padding: 10px 12px;
            border: 1px solid #e9ecef;
            border-radius: 3px;
            font-family: monospace;
            font-size: 11px;
            word-break: break-all;
            margin-bottom: 10px;
            color: #495057;
        }
        
        .qr-code-container {
            text-align: center;
            padding: 20px 0;
        }
        
        .qr-placeholder {
            width: 150px;
            height: 150px;
            background: white;
            border: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            color: #000;
            font-size: 12px;
        }
        
        .qr-description {
            font-size: 12px;
            color: #6c757d;
            margin-top: 10px;
        }
        
        .file-upload-area {
            border: 2px dashed #ced4da;
            border-radius: 4px;
            padding: 30px 20px;
            text-align: center;
            background: #f8f9fa;
            margin: 10px 0;
            cursor: pointer;
        }
        
        .file-upload-area.dragover {
            border-color: #17a2b8;
            background: #e6f7ff;
        }
        
        .upload-icon {
            font-size: 20px;
            color: #17a2b8;
            margin-bottom: 8px;
        }
        
        .upload-text {
            font-size: 13px;
            color: #495057;
            margin-bottom: 4px;
        }
        
        .upload-subtext {
            font-size: 11px;
            color: #6c757d;
        }
        
        .modal-description {
            color: #6c757d;
            font-size: 12px;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .copy-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 3px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .copy-btn:hover {
            background: #138496;
        }
        
        .link-modal .modal-body {
            padding: 20px;
            text-align: left;
        }
        
        .sms-modal .modal-body {
            padding: 20px;
        }
        
        .csv-modal .modal-content {
            max-width: 450px;
        }
        
        .ocr-modal .modal-content {
            max-width: 450px;
        }
        
        .ocr-modal .modal-description {
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        /* 追加ボタンドロップダウンメニュー */
        .header-actions {
            position: relative;
        }
        
        .add-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            display: none;
            min-width: 160px;
            margin-top: 4px;
        }
        
        .add-dropdown-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            color: #495057;
            text-decoration: none;
            border-bottom: 1px solid #f8f9fa;
            cursor: pointer;
            font-size: 13px;
            gap: 8px;
        }
        
        .add-dropdown-item:last-child {
            border-bottom: none;
        }
        
        .add-dropdown-item:hover {
            background: #f8f9fa;
            color: #495057;
        }
        
        /* 3点リーダーメニュー */
        .action-menu {
            position: absolute;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            min-width: 80px;
        }
        
        .action-menu-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            color: #495057;
            text-decoration: none;
            border-bottom: 1px solid #f8f9fa;
            cursor: pointer;
            font-size: 13px;
            gap: 8px;
        }
        
        .action-menu-item:last-child {
            border-bottom: none;
        }
        
        .action-menu-item:hover {
            background: #f8f9fa;
            color: #495057;
        }
        
        .action-menu-item.danger {
            color: #dc3545;
        }
        
        .action-menu-item.danger:hover {
            background: #f8d7da;
            color: #721c24;
        }
        
        .actions {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <select class="company-select">
                <option>会社</option>
            </select>
            <div class="logo">シフト番長</div>
        </div>
        <div class="header-right">
            <i class="fas fa-bell notification-icon"></i>
            <span class="user-name">日野</span>
        </div>
    </div>
    
    <div class="container">
        <nav class="sidebar">
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-chart-bar"></i>
                グラフ
            </a>
            <a href="#" class="nav-item active">
                <i class="nav-icon fas fa-users"></i>
                スタッフ管理
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-calendar-alt"></i>
                シフト管理
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-briefcase"></i>
                業務管理
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-clock"></i>
                勤怠管理
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-umbrella-beach"></i>
                有休管理
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-clipboard-list"></i>
                各種申請/承認
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-globe"></i>
                社員ページ
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-stopwatch"></i>
                計画管理
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-bullhorn"></i>
                メガホン
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-cog"></i>
                設定
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-qrcode"></i>
                打刻用QRコード
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-file-upload"></i>
                シフト提出
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-id-card"></i>
                タイムカード
            </a>
            <a href="#" class="nav-item">
                <i class="nav-icon fas fa-clipboard"></i>
                掲示板
            </a>
            <button class="upgrade-btn">アップグレード</button>
        </nav>
        
        <main class="main-content">
            <div class="breadcrumb">
                <a href="#" class="breadcrumb-back">←</a>
                スタッフ表　NG組み合わせ
            </div>
            
            <div class="page-header">
                <h1 class="page-title">
                    スタッフ表
                    <span class="staff-count">5名</span>
                </h1>
                <div class="header-actions">
                    <button class="btn">
                        <i class="fas fa-download"></i>
                        出力
                    </button>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        追加
                    </button>
                    <!-- 追加ボタンドロップダウンメニュー -->
                    <div id="addDropdown" class="add-dropdown">
                        <div class="add-dropdown-item" data-modal="staffRegisterModal">
                            <i class="fas fa-user-plus"></i>
                            スタッフ登録
                        </div>
                        <div class="add-dropdown-item" data-modal="tempStaffRegisterModal">
                            <i class="fas fa-user-clock"></i>
                            仮スタッフ登録
                        </div>
                        <div class="add-dropdown-item" data-modal="linkModal">
                            <i class="fas fa-link"></i>
                            リンク
                        </div>
                        <div class="add-dropdown-item" data-modal="qrModal">
                            <i class="fas fa-qrcode"></i>
                            QRコード
                        </div>
                        <div class="add-dropdown-item" data-modal="csvModal">
                            <i class="fas fa-file-csv"></i>
                            CSVインポート
                        </div>
                        <div class="add-dropdown-item" data-modal="smsModal">
                            <i class="fas fa-sms"></i>
                            SMS
                        </div>
                        <div class="add-dropdown-item" data-modal="ocrModal">
                            <i class="fas fa-file-download"></i>
                            OCRダウンロード
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="staff-table">
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>名前</th>
                            <th>メモ</th>
                            <th>社員番号</th>
                            <th>タグ</th>
                            <th>時給</th>
                            <th>交通費</th>
                            <th>月最大出勤数</th>
                            <th>連絡先</th>
                            <th>権限</th>
                            <th>シフト表</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="drag-handle">
                                    <i class="fas fa-grip-vertical"></i>
                                </div>
                            </td>
                            <td>
                                <div class="staff-name">日野 真文</div>
                                <div class="staff-memo">ののたのみ</div>
                            </td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="currency">0円</td>
                            <td class="currency">0円</td>
                            <td>無</td>
                            <td>
                                takafumi.hino@regit-technology.com<br>
                                09077495849
                            </td>
                            <td>
                                <select class="role-select">
                                    <option>管理者</option>
                                    <option>スタッフ</option>
                                </select>
                            </td>
                            <td><span class="shift-check">✓</span></td>
                            <td>
                                <div class="actions">
                                    <i class="fas fa-ellipsis-v"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="drag-handle">
                                    <i class="fas fa-grip-vertical"></i>
                                </div>
                            </td>
                            <td>
                                <div class="staff-name">Regit 高木</div>
                                <div class="staff-memo">れじっと たかぎ</div>
                            </td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="currency">0円</td>
                            <td class="currency">0円</td>
                            <td>無</td>
                            <td>bowlingnopin@gmail.com</td>
                            <td>
                                <select class="role-select">
                                    <option selected>スタッフ</option>
                                    <option>管理者</option>
                                </select>
                            </td>
                            <td><span class="shift-check">✓</span></td>
                            <td>
                                <div class="actions">
                                    <i class="fas fa-ellipsis-v"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="drag-handle">
                                    <i class="fas fa-grip-vertical"></i>
                                </div>
                            </td>
                            <td>
                                <div class="staff-name">タロウ</div>
                                <div class="staff-memo">たろう</div>
                            </td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="currency">0円</td>
                            <td class="currency">0円</td>
                            <td>無</td>
                            <td>funingtoor0721@docomo.ne.jp</td>
                            <td>
                                <select class="role-select">
                                    <option selected>スタッフ</option>
                                    <option>管理者</option>
                                </select>
                            </td>
                            <td><span class="shift-check">✓</span></td>
                            <td>
                                <div class="actions">
                                    <i class="fas fa-ellipsis-v"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="drag-handle">
                                    <i class="fas fa-grip-vertical"></i>
                                </div>
                            </td>
                            <td>
                                <div class="staff-name">一雄</div>
                                <div class="staff-memo">仮</div>
                            </td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="currency">0円</td>
                            <td class="currency">0円</td>
                            <td>無</td>
                            <td class="empty-field">−</td>
                            <td>
                                <select class="role-select">
                                    <option selected>スタッフ</option>
                                    <option>管理者</option>
                                </select>
                            </td>
                            <td><span class="shift-check">✓</span></td>
                            <td>
                                <div class="actions">
                                    <i class="fas fa-ellipsis-v"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="drag-handle">
                                    <i class="fas fa-grip-vertical"></i>
                                </div>
                            </td>
                            <td>
                                <div class="staff-name">上原</div>
                                <div class="staff-memo">仮</div>
                            </td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="empty-field">−</td>
                            <td class="currency">0円</td>
                            <td class="currency">0円</td>
                            <td>無</td>
                            <td class="empty-field">−</td>
                            <td>
                                <select class="role-select">
                                    <option selected>スタッフ</option>
                                    <option>管理者</option>
                                </select>
                            </td>
                            <td><span class="shift-check">✓</span></td>
                            <td>
                                <div class="actions">
                                    <i class="fas fa-ellipsis-v"></i>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="pagination">
                    <button class="page-btn" disabled>
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="page-btn" disabled>
                        <i class="fas fa-angle-left"></i>
                    </button>
                    <button class="page-btn active">1</button>
                    <button class="page-btn" disabled>
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="page-btn" disabled>
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                    <span class="items-per-page">25件</span>
                </div>
            </div>
            
            <div class="invite-section">
                <h2 class="invite-title">
                    <i class="fas fa-users invite-icon-header"></i>
                    スタッフ招待
                </h2>
                <div class="invite-grid">
                    <div class="invite-card">
                        <div class="invite-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="invite-label">スタッフ登録</div>
                    </div>
                    <div class="invite-card">
                        <div class="invite-icon">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <div class="invite-label">仮スタッフ登録</div>
                    </div>
                    <div class="invite-card">
                        <div class="invite-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="invite-label">リンク</div>
                    </div>
                    <div class="invite-card">
                        <div class="invite-icon">
                            <i class="fas fa-qrcode"></i>
                        </div>
                        <div class="invite-label">QRコード</div>
                    </div>
                    <div class="invite-card">
                        <div class="invite-icon">
                            <i class="fas fa-file-csv"></i>
                        </div>
                        <div class="invite-label">CSVインポート</div>
                    </div>
                    <div class="invite-card">
                        <div class="invite-icon">
                            <i class="fas fa-sms"></i>
                        </div>
                        <div class="invite-label">SMS</div>
                    </div>
                    <div class="invite-card">
                        <div class="invite-icon">
                            <i class="fas fa-file-download"></i>
                        </div>
                        <div class="invite-label">OCR<br>ダウンロード</div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- 3点リーダーアクションメニュー -->
    <div id="actionMenu" class="action-menu">
        <div class="action-menu-item" onclick="editStaff()">
            <i class="fas fa-edit"></i>
            編集
        </div>
        <div class="action-menu-item danger" onclick="deleteStaff()">
            <i class="fas fa-trash"></i>
            削除
        </div>
    </div>
    
    <!-- モーダル群 -->
    <!-- スタッフ登録モーダル -->
    <div id="staffRegisterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">スタッフ登録</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label class="form-label">名前</label>
                        <input type="text" class="form-input" placeholder="オプラス 太郎">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ふりがな</label>
                        <input type="text" class="form-input" placeholder="おぷらす たろう">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" placeholder="xxx.xxxx@xxx.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">電話番号</label>
                        <input type="tel" class="form-input" placeholder="(888)-8888-8888">
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-modal btn-modal-primary" onclick="registerStaff(false)">スタッフ登録</button>
            </div>
        </div>
    </div>
    
    <!-- 仮スタッフ登録モーダル -->
    <div id="tempStaffRegisterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">仮スタッフ登録</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label class="form-label">名前</label>
                        <input type="text" class="form-input" placeholder="オプラス 太郎">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ふりがな</label>
                        <input type="text" class="form-input" placeholder="仮">
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-modal btn-modal-primary" onclick="registerStaff(true)">仮スタッフ登録</button>
            </div>
        </div>
    </div>
    
    <!-- リンクモーダル -->
    <div id="linkModal" class="modal link-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">リンク</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-description">
                    リンクからスタッフが登録出来ます
                </div>
                <div class="invite-url">
                    https://opluswork.com/company/5927058428395520/join
                </div>
                <button class="copy-btn" onclick="copyToClipboard('https://opluswork.com/company/5927058428395520/join')">コピー</button>
            </div>
        </div>
    </div>
    
    <!-- QRコードモーダル -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">QRコード</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="qr-code-container">
                    <div class="qr-placeholder">
                        ■■■■■■■■■■■■■■■<br>
                        ■■　　■■■■　■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■<br>
                        ■■■■■■■■■■■■■■■
                    </div>
                    <div class="qr-description">
                        QRコードからスタッフが登録出来ます
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- CSVインポートモーダル -->
    <div id="csvModal" class="modal csv-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">CSVインポート</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-description">
                    CSVファイルから複数のスタッフを登録出来ます。メールアドレスは必須となっております。なお、こちらの機能で編集する事も出来ます。<br>
                    <a href="#" style="color: #007bff;">CSVファイルでのサンプル</a>
                </div>
                <div class="file-upload-area" id="csvUploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">ファイルをインポート</div>
                    <div class="upload-subtext">
                        選択されていません<br>
                        ドラッグ&ドロップまたは <a href="#" style="color: #007bff;">参照</a>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-modal btn-modal-primary">インポート</button>
            </div>
        </div>
    </div>
    
    <!-- SMSモーダル -->
    <div id="smsModal" class="modal sms-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">SMS</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-description">
                    スタッフへ登録用URLが送信されます
                </div>
                <div class="form-group">
                    <label class="form-label">電話番号</label>
                    <input type="tel" class="form-input" placeholder="電話番号">
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-modal btn-modal-primary">送信</button>
            </div>
        </div>
    </div>
    
    <!-- OCRダウンロードモーダル -->
    <div id="ocrModal" class="modal ocr-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">OCRタイムシート</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-description">
                    OCRタイムシートを印刷しシフトを記入することが出来ます。<br><br>
                    サイズはA4、黒インクで印刷をしてください。<br><br>
                    なお、記入したシートはシフト管理のクイックスキャンにて読み込むことで、シフトをインポートすることが可能です。
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-modal btn-modal-primary">ダウンロード</button>
                <button type="button" class="btn-modal btn-modal-secondary">印刷</button>
            </div>
        </div>
    </div>
    
    <script>
        // ドラッグ&ドロップ機能
        let draggedRow = null;
        
        document.querySelectorAll('tbody tr').forEach(row => {
            row.draggable = true;
            
            row.addEventListener('dragstart', function(e) {
                draggedRow = this;
                this.style.opacity = '0.5';
                e.dataTransfer.effectAllowed = 'move';
            });
            
            row.addEventListener('dragend', function(e) {
                this.style.opacity = '';
                draggedRow = null;
            });
            
            row.addEventListener('dragover', function(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
                this.style.borderTop = '2px solid #007bff';
            });
            
            row.addEventListener('dragleave', function(e) {
                this.style.borderTop = '';
            });
            
            row.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.borderTop = '';
                
                if (draggedRow !== this) {
                    const tbody = this.parentNode;
                    const draggedIndex = Array.from(tbody.children).indexOf(draggedRow);
                    const targetIndex = Array.from(tbody.children).indexOf(this);
                    
                    if (draggedIndex < targetIndex) {
                        tbody.insertBefore(draggedRow, this.nextSibling);
                    } else {
                        tbody.insertBefore(draggedRow, this);
                    }
                }
            });
        });
        
        // 権限変更
        document.querySelectorAll('.role-select').forEach(select => {
            select.addEventListener('change', function() {
                console.log('権限変更:', this.value);
            });
        });
        
        // グローバル変数
        let addDropdownVisible = false;
        
        // 追加ドロップダウンを隠す
        function hideAddDropdown() {
            const dropdown = document.getElementById('addDropdown');
            if (dropdown) {
                dropdown.style.display = 'none';
                addDropdownVisible = false;
            }
        }
        
        // 招待カード
        document.querySelectorAll('.invite-card').forEach(card => {
            card.addEventListener('click', function() {
                const label = this.querySelector('.invite-label').textContent.trim();
                
                // モーダルマッピング
                const modalMap = {
                    'スタッフ登録': 'staffRegisterModal',
                    '仮スタッフ登録': 'tempStaffRegisterModal', 
                    'リンク': 'linkModal',
                    'QRコード': 'qrModal',
                    'CSVインポート': 'csvModal',
                    'SMS': 'smsModal',
                    'OCRダウンロード': 'ocrModal'
                };
                
                const modalId = modalMap[label];
                if (modalId) {
                    showModal(modalId);
                }
            });
        });
        
        // モーダル表示関数
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'block';
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);
        }
        
        // モーダル非表示関数
        function hideModal(modal) {
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }
        
        // モーダル閉じる機能
        document.querySelectorAll('.modal-close').forEach(closeBtn => {
            closeBtn.addEventListener('click', function() {
                hideModal(this.closest('.modal'));
            });
        });
        
        // モーダル背景クリックで閉じる
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    hideModal(this);
                }
            });
        });
        
        // コピー機能
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('URLをコピーしました');
            });
        }
        
        // CSV ドラッグ&ドロップ
        const csvUploadArea = document.getElementById('csvUploadArea');
        if (csvUploadArea) {
            csvUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                csvUploadArea.classList.add('dragover');
            });
            
            csvUploadArea.addEventListener('dragleave', () => {
                csvUploadArea.classList.remove('dragover');
            });
            
            csvUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                csvUploadArea.classList.remove('dragover');
                alert('CSVファイルを受け取りました');
            });
        }
        
        // スタッフデータ管理
        function saveStaffData() {
            const staffList = [];
            document.querySelectorAll('tbody tr').forEach(row => {
                const staffData = {
                    id: Date.now() + Math.random(), // ユニークID
                    name: row.querySelector('.staff-name').textContent,
                    furigana: row.querySelector('.staff-memo').textContent,
                    email: '',
                    phone: '',
                    isTemp: false,
                    role: row.querySelector('.role-select').value
                };
                
                // 連絡先情報の取得
                const contactCell = row.cells[8];
                if (contactCell.textContent.includes('@')) {
                    const lines = contactCell.innerHTML.split('<br>');
                    staffData.email = lines[0] || '';
                    staffData.phone = lines[1] || '';
                } else {
                    staffData.isTemp = true;
                }
                
                staffList.push(staffData);
            });
            
            localStorage.setItem('staffManagementData', JSON.stringify(staffList));
        }
        
        function loadStaffData() {
            const savedData = localStorage.getItem('staffManagementData');
            if (savedData) {
                const staffList = JSON.parse(savedData);
                const tbody = document.querySelector('tbody');
                
                // 既存のスタッフ行をクリア（初期データ以外）
                const initialRows = tbody.querySelectorAll('tr');
                initialRows.forEach((row, index) => {
                    if (index >= 5) { // 初期5名以降を削除
                        row.remove();
                    }
                });
                
                // 保存されたスタッフを追加
                staffList.forEach((staffData, index) => {
                    if (index >= 5) { // 初期5名以降のデータのみ追加
                        addStaffToTable(staffData, false); // 保存しない
                    }
                });
                
                updateStaffCount();
            }
        }
        
        // スタッフ登録機能
        function registerStaff(isTemp) {
            const modalId = isTemp ? 'tempStaffRegisterModal' : 'staffRegisterModal';
            const modal = document.getElementById(modalId);
            const form = modal.querySelector('form');
            
            // フォームデータ取得
            const formData = new FormData(form);
            const name = form.querySelector('input[placeholder*="太郎"]').value;
            const furigana = form.querySelector('input[placeholder*="たろう"], input[placeholder="仮"]').value;
            const email = isTemp ? '' : (form.querySelector('input[type="email"]')?.value || '');
            const phone = isTemp ? '' : (form.querySelector('input[type="tel"]')?.value || '');
            
            // バリデーション
            if (!name || !furigana) {
                alert('名前とふりがなを入力してください。');
                return;
            }
            
            if (!isTemp && (!email || !phone)) {
                alert('全ての項目を入力してください。');
                return;
            }
            
            // スタッフ追加
            addStaffToTable({
                id: Date.now() + Math.random(),
                name: name,
                furigana: furigana,
                email: email,
                phone: phone,
                isTemp: isTemp,
                role: 'スタッフ'
            });
            
            // フォームリセット
            form.reset();
            
            // モーダル閉じる
            hideModal(modal);
            
            // スタッフ数更新
            updateStaffCount();
            
            // データ保存
            saveStaffData();
        }
        
        // スタッフテーブルに追加
        function addStaffToTable(staffData, shouldSave = true) {
            const tbody = document.querySelector('tbody');
            const newRow = document.createElement('tr');
            newRow.draggable = true;
            newRow.dataset.staffId = staffData.id || Date.now() + Math.random();
            
            // ドラッグ&ドロップイベント追加
            addDragEvents(newRow);
            
            const contactInfo = staffData.isTemp ? 
                '<span class="empty-field">−</span>' : 
                `${staffData.email}<br>${staffData.phone}`;
            
            newRow.innerHTML = `
                <td>
                    <div class="drag-handle">
                        <i class="fas fa-grip-vertical"></i>
                    </div>
                </td>
                <td>
                    <div class="staff-name">${staffData.name}</div>
                    <div class="staff-memo">${staffData.furigana}</div>
                </td>
                <td class="empty-field">−</td>
                <td class="empty-field">−</td>
                <td class="empty-field">−</td>
                <td class="currency">0円</td>
                <td class="currency">0円</td>
                <td>無</td>
                <td>${contactInfo}</td>
                <td>
                    <select class="role-select">
                        <option ${staffData.role === 'スタッフ' ? 'selected' : ''}>スタッフ</option>
                        <option ${staffData.role === '管理者' ? 'selected' : ''}>管理者</option>
                    </select>
                </td>
                <td><span class="shift-check">✓</span></td>
                <td>
                    <div class="actions">
                        <i class="fas fa-ellipsis-v"></i>
                    </div>
                </td>
            `;
            
            tbody.appendChild(newRow);
            
            // 新しい行の権限変更イベント追加
            const newSelect = newRow.querySelector('.role-select');
            newSelect.addEventListener('change', function() {
                console.log('権限変更:', this.value);
                if (shouldSave) saveStaffData(); // 権限変更時も保存
            });
            
            // アクションメニューイベント追加
            const newAction = newRow.querySelector('.actions');
            newAction.addEventListener('click', function(e) {
                e.stopPropagation();
                const menu = document.getElementById('actionMenu');
                currentActionRow = this.closest('tr');
                
                if (actionMenuVisible) {
                    hideActionMenu();
                    return;
                }
                
                // メニュー位置計算
                const rect = this.getBoundingClientRect();
                menu.style.display = 'block';
                menu.style.left = (rect.left - menu.offsetWidth + 20) + 'px';
                menu.style.top = (rect.bottom + 5) + 'px';
                
                actionMenuVisible = true;
            });
        }
        
        // ドラッグイベントを行に追加
        function addDragEvents(row) {
            row.addEventListener('dragstart', function(e) {
                draggedRow = this;
                this.style.opacity = '0.5';
                e.dataTransfer.effectAllowed = 'move';
            });
            
            row.addEventListener('dragend', function(e) {
                this.style.opacity = '';
                draggedRow = null;
            });
            
            row.addEventListener('dragover', function(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
                this.style.borderTop = '2px solid #007bff';
            });
            
            row.addEventListener('dragleave', function(e) {
                this.style.borderTop = '';
            });
            
            row.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.borderTop = '';
                
                if (draggedRow !== this) {
                    const tbody = this.parentNode;
                    const draggedIndex = Array.from(tbody.children).indexOf(draggedRow);
                    const targetIndex = Array.from(tbody.children).indexOf(this);
                    
                    if (draggedIndex < targetIndex) {
                        tbody.insertBefore(draggedRow, this.nextSibling);
                    } else {
                        tbody.insertBefore(draggedRow, this);
                    }
                    
                    // ドラッグ&ドロップ後にデータ保存
                    saveStaffData();
                }
            });
        }
        
        // スタッフ数更新
        function updateStaffCount() {
            const staffCount = document.querySelectorAll('tbody tr').length;
            document.querySelector('.staff-count').textContent = `${staffCount}名`;
        }
        
        // ページ読み込み時にデータ復元とイベント設定
        document.addEventListener('DOMContentLoaded', function() {
            loadStaffData();
            
            // 追加ボタンのイベントリスナーを設定
            const addBtn = document.querySelector('.btn-primary');
            if (addBtn) {
                addBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const dropdown = document.getElementById('addDropdown');
                    if (!dropdown) return;
                    
                    if (addDropdownVisible) {
                        hideAddDropdown();
                    } else {
                        dropdown.style.display = 'block';
                        addDropdownVisible = true;
                    }
                });
            }
            
            // 追加ドロップダウンアイテムのイベントリスナーを設定
            document.querySelectorAll('.add-dropdown-item').forEach(item => {
                item.addEventListener('click', function() {
                    const modalId = this.dataset.modal;
                    hideAddDropdown();
                    showModal(modalId);
                });
            });
            
            // クリック外で追加ドロップダウンを閉じる
            document.addEventListener('click', function(e) {
                if (addDropdownVisible && !e.target.closest('.header-actions') && !e.target.closest('#addDropdown')) {
                    hideAddDropdown();
                }
            });
        });
        
        // 既存スタッフの権限変更にも保存機能追加
        document.querySelectorAll('.role-select').forEach(select => {
            select.addEventListener('change', function() {
                console.log('権限変更:', this.value);
                saveStaffData();
            });
        });
        
        // アクションメニュー（3点リーダー）
        let currentActionRow = null;
        let actionMenuVisible = false;
        
        document.querySelectorAll('.actions').forEach(action => {
            action.addEventListener('click', function(e) {
                e.stopPropagation();
                const menu = document.getElementById('actionMenu');
                currentActionRow = this.closest('tr');
                
                if (actionMenuVisible) {
                    hideActionMenu();
                    return;
                }
                
                // メニュー位置計算
                const rect = this.getBoundingClientRect();
                menu.style.display = 'block';
                menu.style.left = (rect.left - menu.offsetWidth + 20) + 'px';
                menu.style.top = (rect.bottom + 5) + 'px';
                
                actionMenuVisible = true;
            });
        });
        
        // アクションメニューを隠す
        function hideActionMenu() {
            const menu = document.getElementById('actionMenu');
            menu.style.display = 'none';
            actionMenuVisible = false;
            currentActionRow = null;
        }
        
        // クリック外でメニューを閉じる
        document.addEventListener('click', function(e) {
            if (actionMenuVisible && !e.target.closest('#actionMenu')) {
                hideActionMenu();
            }
        });
        
        // スタッフ編集
        function editStaff() {
            if (!currentActionRow) return;
            
            // 現在のスタッフデータを取得
            const staffName = currentActionRow.querySelector('.staff-name').textContent;
            const staffFurigana = currentActionRow.querySelector('.staff-memo').textContent;
            const contactCell = currentActionRow.cells[8];
            const role = currentActionRow.querySelector('.role-select').value;
            
            // モーダルにデータを設定
            document.getElementById('edit-name').value = staffName;
            document.getElementById('edit-furigana').value = staffFurigana;
            document.getElementById('edit-role').value = role;
            
            // 連絡先情報の設定
            if (contactCell.innerHTML.includes('@')) {
                const lines = contactCell.innerHTML.split('<br>');
                document.getElementById('edit-email').value = lines[0] || '';
                document.getElementById('edit-phone').value = lines[1] || '';
            } else {
                document.getElementById('edit-email').value = '';
                document.getElementById('edit-phone').value = '';
            }
            
            hideActionMenu();
            showModal('staffEditModal');
        }
        
        // スタッフ削除
        function deleteStaff() {
            if (!currentActionRow) return;
            
            const staffName = currentActionRow.querySelector('.staff-name').textContent;
            if (confirm(`「${staffName}」を削除しますか？この操作は取り消せません。`)) {
                currentActionRow.remove();
                updateStaffCount();
                saveStaffData();
            }
            
            hideActionMenu();
        }
        
        // スタッフ編集保存
        function saveStaffEdit() {
            if (!currentActionRow) return;
            
            // フォームデータ取得
            const name = document.getElementById('edit-name').value;
            const furigana = document.getElementById('edit-furigana').value;
            const email = document.getElementById('edit-email').value;
            const phone = document.getElementById('edit-phone').value;
            const role = document.getElementById('edit-role').value;
            
            // バリデーション
            if (!name || !furigana) {
                alert('名前とふりがなは必須です。');
                return;
            }
            
            // スタッフ情報更新
            currentActionRow.querySelector('.staff-name').textContent = name;
            currentActionRow.querySelector('.staff-memo').textContent = furigana;
            currentActionRow.querySelector('.role-select').value = role;
            
            // 連絡先更新
            const contactCell = currentActionRow.cells[8];
            if (email && phone) {
                contactCell.innerHTML = `${email}<br>${phone}`;
            } else if (email) {
                contactCell.innerHTML = email;
            } else {
                contactCell.innerHTML = '<span class="empty-field">−</span>';
            }
            
            // データ保存
            saveStaffData();
            
            // モーダル閉じる
            hideModal(document.getElementById('staffEditModal'));
            
            alert('スタッフ情報を更新しました。');
        }
    </script>
</body>
</html>